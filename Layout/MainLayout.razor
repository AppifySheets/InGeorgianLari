@inherits LayoutComponentBase
@inject IJSRuntime JSRuntime

<div class="animated-bg"></div>
<div class="particles" id="global-particles"></div>

<div class="page">
    <div class="sidebar">
        <NavMenu />
    </div>

    <main>
        <article class="content px-4">
            @Body
        </article>
    </main>
</div>

@code {
    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            await JSRuntime.InvokeVoidAsync("createParticles", "global-particles");
        }
    }
}

<style>
    .animated-bg {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: -2;
        background: #0A0A0A;
        overflow: hidden;
    }

    .animated-bg::before {
        content: '';
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background: 
            radial-gradient(circle at 20% 50%, rgba(139, 92, 246, 0.08) 0%, transparent 50%),
            radial-gradient(circle at 80% 80%, rgba(236, 72, 153, 0.08) 0%, transparent 50%),
            radial-gradient(circle at 40% 20%, rgba(34, 197, 94, 0.06) 0%, transparent 50%),
            radial-gradient(circle at 90% 10%, rgba(251, 191, 36, 0.06) 0%, transparent 50%);
        animation: bgFloat 30s ease-in-out infinite;
    }

    .animated-bg::after {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: 
            repeating-linear-gradient(
                90deg,
                transparent,
                transparent 2px,
                rgba(139, 92, 246, 0.03) 2px,
                rgba(139, 92, 246, 0.03) 4px
            ),
            repeating-linear-gradient(
                0deg,
                transparent,
                transparent 2px,
                rgba(236, 72, 153, 0.03) 2px,
                rgba(236, 72, 153, 0.03) 4px
            );
    }

    .particles {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: -1;
        pointer-events: none;
    }

    .page {
        position: relative;
        z-index: 1;
        display: flex;
        min-height: 100vh;
        background: transparent;
    }
    
    .sidebar {
        background: var(--card) !important;
        border-right: 1px solid var(--border);
        min-height: 100vh;
    }

    main {
        flex: 1;
        background: transparent;
    }

    .content {
        background: transparent;
    }

    @@keyframes bgFloat {
        0%, 100% {
            transform: translate(0, 0) rotate(0deg) scale(1);
        }
        25% {
            transform: translate(-30px, -30px) rotate(1deg) scale(1.1);
        }
        50% {
            transform: translate(20px, -40px) rotate(-1deg) scale(1.05);
        }
        75% {
            transform: translate(-20px, 20px) rotate(2deg) scale(1.15);
        }
    }
</style>
